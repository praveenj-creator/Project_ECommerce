{% extends 'store/base.html' %}
{% block title %}My Orders — LuxeDress{% endblock %}
{% block body %}
{% include 'store/navbar.html' %}
<div class="container py-5">
  <h2 style="font-weight:700">My Orders</h2>
  <p class="text-muted mb-4">Track and manage your orders</p>
  {% if orders %}
  {% for order in orders %}
  <div class="card border-0 shadow-sm mb-3" style="border-radius:12px">
    <div class="card-body p-4">
      <div class="d-flex justify-content-between align-items-start mb-3">
        <div>
          <h6 class="fw-bold mb-1">#{{ order.order_id }}</h6>
          <div class="text-muted small">{{ order.created_at|date:"M d, Y" }}</div>
        </div>
        <span class="badge px-3 py-2" style="
          background:{% if order.status == 'delivered' %}#dcfce7{% elif order.status == 'shipped' %}#dbeafe{% elif order.status == 'cancelled' %}#fee2e2{% else %}#fef3c7{% endif %};
          color:{% if order.status == 'delivered' %}#16a34a{% elif order.status == 'shipped' %}#1d4ed8{% elif order.status == 'cancelled' %}#dc2626{% else %}#92400e{% endif %};
          border-radius:8px;font-size:.8rem">{{ order.status|title }}</span>
      </div>
      {% for item in order.items.all %}
      <div class="d-flex gap-3 align-items-center mb-2">
        <div class="text-muted small">• {{ item.product_name }} × {{ item.quantity }} ({{ item.size }}, {{ item.color }}) — ${{ item.price }}</div>
      </div>
      {% endfor %}
      <hr class="my-2">
      <div class="d-flex justify-content-between align-items-center">
        <span class="text-muted small">Total: <strong>${{ order.total }}</strong></span>
        <span class="text-muted small">{{ order.payment_method|title }}</span>
      </div>
    </div>
  </div>
  {% endfor %}
  {% else %}
  <div class="text-center py-5">
    <i class="bi bi-bag-x display-1 text-muted d-block mb-3"></i>
    <h5 class="text-muted">No orders yet</h5>
    <a href="{% url 'shop' %}" class="btn btn-forest mt-3">Start Shopping</a>
  </div>
  {% endif %}
</div>
{% include 'store/footer.html' %}
{% endblock %}
